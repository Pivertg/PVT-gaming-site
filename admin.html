<script>
    // Attendre que le DOM soit complètement chargé
    window.addEventListener("DOMContentLoaded", () => {
        const isLoggedIn = sessionStorage.getItem("adminToken") === "adminLoggedIn";
        const currentPage = window.location.pathname;

        // Ne pas rediriger si on vient d'une déconnexion ou si le token est invalide
        if (isLoggedIn && !document.referrer.includes("admin-dashboard.html")) {
            setTimeout(() => {
                window.location.href = "admin-dashboard.html";
            }, 1000); // Attend 1 seconde avant de rediriger
        }
    });

    document.getElementById("admin-login-form").addEventListener("submit", function (event) {
        event.preventDefault();

        const pseudo = document.getElementById("admin-pseudo").value.trim();
        const password = document.getElementById("admin-password").value.trim();

        if (pseudo === "admin" && password === "MonSuperMotDePasse123") {
            alert("✅ Connexion réussie !");
            sessionStorage.setItem("adminToken", "adminLoggedIn");
            setTimeout(() => {
                window.location.href = "admin-dashboard.html";
            }, 500);
        } else {
            alert("❌ Pseudo ou mot de passe incorrect !");
        }
    });
</script>
